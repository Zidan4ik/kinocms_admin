<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <title>kinocms</title>
    <th:block th:replace="blocks/links::links"></th:block>
    <th:block th:replace="blocks/links::linksFontAwesome"></th:block>
    <th:block th:replace="blocks/links::linksTagify"></th:block>
    <th:block th:replace="blocks/links::linksBootstrapDatePicker"></th:block>
    <th:block th:replace="blocks/links::linksBootstrapSelect"></th:block>
</head>

<body>
<!-- Layout wrapper -->
<div class="layout-wrapper layout-navbar-full layout-horizontal layout-without-menu">

    <!-- Layout container -->
    <div class="layout-container">

        <!-- Navbar -->
        <div th:insert="~{blocks/navbar::navbar}"></div>
        <!--/ Navbar -->

        <!-- Layout page -->
        <div class="layout-page">

            <!-- Menu -->
            <aside th:insert="blocks/sidebar::sidebar"
                   id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme sidebar"
                   style="display: flex;flex-direction: column;height: 100%;">
            </aside>
            <!--/ Menu -->

            <!-- Content wrapper -->
            <div class="content-wrapper">

                <!-- Content -->
                <div class="container-xxl d-flex align-items-stretch flex-grow-1 p-0">
                    <div class="flex-shrink-1 flex-grow-1 container-p-x container-p-y">
                        <div style="margin-top: 50px">
                            <ul class="nav nav-pills mb-3 justify-content-end" id="pills-tab" role="tablist">
                                <div class="btn-group">
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link active" id="pills-ukraine-tab" data-bs-toggle="pill"
                                                data-bs-target="#pills-ukraine" type="button" role="tab"
                                                aria-controls="pills-ukraine" aria-selected="true"
                                                th:onclick="changeLanguage('ukr')">Українська
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="pills-england-tab" data-bs-toggle="pill"
                                                data-bs-target="#pills-england" type="button" role="tab"
                                                aria-controls="pills-england" aria-selected="false"
                                                th:onclick="changeLanguage('eng')">Англійська
                                        </button>
                                    </li>
                                </div>
                            </ul>
                        </div>
                        <form method="post" class="filmForm" enctype="multipart/form-data">
                            <div class="tab-content" id="pills-tabContent">
                                <div class="tab-pane fade show active" id="pills-ukraine" role="tabpanel"
                                     aria-labelledby="pills-ukraine-tab" tabindex="0">
                                    <div class="row mb-3">
                                        <div class="col-4">
                                            <label class="form-label" for="titleFilm-ukr">Назва фільму</label>
                                            <input class="form-control js-input" id="titleFilm-ukr"
                                                   style="width: 100%" placeholder="введіть назву">
                                        </div>
                                        <div class="col">
                                            <label for="dateStart-ukr" class="form-label">Діапазон дати</label>
                                            <div class="input-group input-daterange" id="bs-datepicker-daterange-ukr">
                                                <input
                                                        id="dateStart-ukr" type="text" placeholder="DD/MM/YYYY"
                                                        class="form-control js-input"/>
                                                <span class="input-group-text">-</span>
                                                <input
                                                        id="dateEnd-ukr" type="text" placeholder="DD/MM/YYYY"
                                                        class="form-control js-input"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label" for="descriptionFilm-ukr">Опис</label>
                                        <textarea class="form-control" rows="3" id="descriptionFilm-ukr"
                                                  style="width:100%; height: 250px;"
                                                  placeholder="введіть опис"></textarea>
                                    </div>
                                    <!-- main image -->
                                    <div class="row" style="width: auto;height: 150px" id="image-main-ukr">
                                        <div class="col-4 d-flex">
                                            <div class="row">
                                                <div class="col-6 d-flex align-items-center">
                                                    <label class="form-label">Головна картина</label>
                                                </div>
                                                <div class="col-6 d-flex align-items-center">
                                                    <img id="image-main-download-ukr"
                                                         style="width: 200px;height: 200px;text-align: center">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col d-flex flex-column align-items-center justify-content-center">
                                            <div class="d-flex gap-5">
                                                <label class="input-add" for="btn-download-image-ukr"
                                                       data-index="0" data-type="imageDownload-ukr">
                                                    Добавити</label>
                                                <input id="btn-download-image-ukr"
                                                       type="file"
                                                       style="display: none">

                                                <btn class="input-add"
                                                     data-index="0" data-type="imageDelete-ukr">
                                                    Видалити
                                                </btn>
                                            </div>
                                            <div class="isValid-image">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-5"><h5>Галерея</h5></div>
                                    <!-- galleries -->
                                    <div class="row gap-4 galleries-ukr" id="galleries-ukr"></div>
                                    <!-- link on trailer -->
                                    <div class="mb-3" style="width: 100%">
                                        <label for="linkTrailer-ukr" class="form-label">Посилання на трейлер</label>
                                        <input id="linkTrailer-ukr" name="linkTrailer"
                                               class="form-control js-input" placeholder="введіть посилання"
                                               style="height: 37.6px">
                                    </div>
                                    <!-- marks -->
                                    <div class="mb-3" style="width: 100%">
                                        <label for="marksFilm-ukr" class="form-label">Тип кіно</label>
                                        <input id="marksFilm-ukr"
                                               class="form-control" placeholder="вибери значок" style="height: 37.6px;">
                                        <p style="color:red" class="isValid-marks"></p>
                                    </div>
                                    <!-- genres -->
                                    <div class="mb-3">
                                        <label for="genresFilm-ukr" class="form-label">Жанри фільму</label>
                                        <select id="genresFilm-ukr" class="w-100 form-control border"
                                                data-style="btn-default" multiple data-icon-base="ti"
                                                data-tick-icon="ti-check text-white"
                                                placeholder="Нічого не вибрано">
                                            <option value="comedy">Комедія</option>
                                            <option value="fantasy">Фантастика</option>
                                            <option value="horror">Жахи</option>
                                            <option value="action">Бойовик</option>
                                            <option value="melodramas">Мелодрами</option>
                                            <option value="mysticism">Містика</option>
                                            <option value="detective">Детектив</option>
                                        </select>
                                        <p style="color: red" class="isValid-genres"></p>
                                    </div>
                                    <!-- additional info-->
                                    <div class="row mb-3">
                                        <div class="col-4 row">
                                            <label for="timeFilm-ukr" class="form-label">Час тривалості</label>
                                            <div class="col-md-10">
                                                <input class="form-control js-input" type="time" id="timeFilm-ukr"
                                                       placeholder="-"/>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <label class="form-label" for="yearFilm-ukr">Дата випуску</label>
                                            <input class="form-control js-input" id="yearFilm-ukr"
                                                   style="width: 100%" placeholder="введіть рік" type="text">
                                        </div>
                                        <div class="col-4">
                                            <label class="form-label" for="budgetFilm-ukr">Бюджет фільму</label>
                                            <div class="input-group input-group-merge">
                                                <span class="input-group-text">$</span>
                                                <input type="text" class="form-control js-input" placeholder="100"
                                                       aria-label="Amount (to the nearest dollar)"
                                                       id="budgetFilm-ukr"/>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ceo block -->
                                    <div class="col-12 mt-5">
                                        <div class="row">
                                            <h5 class="col-12 d-flex justify-content-center">SEO Блок: </h5>
                                            <div>
                                                <!-- URL -->
                                                <div class="col-12 d-flex justify-content-center mb-4">
                                                    <div>
                                                        <label class="form-label" for="urlCeo-ukr">Уніфікований локатор
                                                            ресурсів:</label>
                                                        <input type="text" id="urlCeo-ukr" class="form-control js-input"
                                                               placeholder="введіть посилання" style="width: 500px">
                                                    </div>
                                                </div>

                                                <!-- Title -->
                                                <div class="col-12 d-flex justify-content-center mb-4">
                                                    <div>
                                                        <label class="form-label" for="titleCeo-ukr">Заголовок:</label>
                                                        <input type="text" id="titleCeo-ukr"
                                                               class="form-control js-input"
                                                               placeholder="введіть заголовок" style="width: 500px">
                                                    </div>
                                                </div>

                                                <!-- Keywords -->
                                                <div class="col-12 d-flex justify-content-center mb-4">
                                                    <div>
                                                        <label class="form-label" for="keywordsCeo-ukr">Ключові
                                                            слова:</label>
                                                        <input type="text" id="keywordsCeo-ukr"
                                                               class="form-control js-input"
                                                               placeholder="введіть ключові слова" style="width: 500px">
                                                    </div>
                                                </div>

                                                <!-- Description -->
                                                <div class="col-12 d-flex justify-content-center mb-4">
                                                    <div style="width: 500px">
                                                        <label class="form-label"
                                                               for="descriptionCeo-ukr">Опис:</label>
                                                        <textarea class="form-control" rows="3"
                                                                  id="descriptionCeo-ukr"
                                                                  style="width:100%; height: 250px;"
                                                                  placeholder="введіть опис"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-evenly">
                                        <button class="btn btn-secondary" style="width: 200px"
                                                type="submit"> Зберегти
                                        </button>
                                        <button class="btn btn-secondary back-version-ukr" style="width: 200px"
                                                type="button"> Базова версія
                                        </button>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-england" role="tabpanel"
                                     aria-labelledby="pills-england-tab" tabindex="0">
                                    <div class="row mb-3">
                                        <div class="col-4">
                                            <label class="form-label" for="titleFilm-eng">The name of the movie</label>
                                            <input class="form-control js-input" id="titleFilm-eng"
                                                   style="width: 100%" placeholder="enter a name">
                                        </div>
                                        <div class="col">
                                            <label for="dateStart-eng" class="form-label">A period of time</label>
                                            <div class="input-group input-daterange" id="bs-datepicker-daterange-eng">
                                                <input id="dateStart-eng" type="text" placeholder="DD/MM/YYYY"
                                                       class="form-control js-input"/>
                                                <span class="input-group-text">-</span>
                                                <input id="dateEnd-eng" type="text" placeholder="DD/MM/YYYY"
                                                       class="form-control js-input"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label" for="descriptionFilm-eng">Description</label>
                                        <textarea class="form-control" rows="3" id="descriptionFilm-eng"
                                                  style="width:100%; height: 250px;"
                                                  placeholder="enter a description"></textarea>
                                    </div>
                                    <!-- main image -->
                                    <div class="row" style="width: auto;height: 150px" id="image-main-eng">
                                        <div class="col-4 d-flex">
                                            <div class="row">
                                                <div class="col-6 d-flex align-items-center">
                                                    <label class="form-label">The main picture</label>
                                                </div>
                                                <div class="col-6 d-flex align-items-center">
                                                    <img id="image-main-download-eng"
                                                         style="width: 200px;height: 200px;text-align: center">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col d-flex flex-column align-items-center justify-content-center">
                                            <div class="d-flex gap-5">
                                                <label class="input-add" for="btn-download-image-eng"
                                                       data-index="0" data-type="imageDownload-eng">
                                                    Добавити</label>
                                                <input id="btn-download-image-eng"
                                                       type="file"
                                                       style="display: none">

                                                <btn class="input-add"
                                                     data-index="0" data-type="imageDelete-eng">
                                                    Видалити
                                                </btn>
                                            </div>
                                            <div class="isValid-image">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-5"><h5>Gallery</h5></div>
                                    <!-- galleries -->
                                    <div class="row gap-4 galleries-eng" id="galleries-eng"></div>
                                    <!-- link on trailer -->
                                    <div class="mb-3" style="width: 100%">
                                        <label for="linkTrailer-eng" class="form-label">Link to trailer</label>
                                        <input id="linkTrailer-eng" name="linkTrailer"
                                               class="form-control js-input" placeholder="enter link"
                                               style="height: 37.6px">
                                    </div>
                                    <!-- marks -->
                                    <div class="mb-3" style="width: 100%">
                                        <label for="marksFilm-eng" class="form-label">Type of cinema</label>
                                        <input id="marksFilm-eng"
                                               class="form-control" placeholder="enter marks" style="height: 37.6px;">
                                        <p style="color:red" class="isValid-marks"></p>
                                    </div>
                                    <!-- genres -->
                                    <div class="mb-3">
                                        <label for="genresFilm-eng" class="form-label">Film genres</label>
                                        <select id="genresFilm-eng" class="w-100 form-control border"
                                                data-style="btn-default" multiple data-icon-base="ti"
                                                data-tick-icon="ti-check text-white"
                                                placeholder="Nothing selected">
                                            <option value="comedy">Comedy</option>
                                            <option value="fantasy">Fantasy</option>
                                            <option value="horror">Horrors</option>
                                            <option value="action">Action</option>
                                            <option value="melodramas">Melodramas</option>
                                            <option value="mysticism">Mysticism</option>
                                            <option value="detective">Detective</option>
                                        </select>
                                        <p style="color: red" class="isValid-genres"></p>
                                    </div>
                                    <!-- additional info-->
                                    <div class="row mb-3">
                                        <div class="col-4 row">
                                            <label for="timeFilm-eng" class="form-label">Duration time</label>
                                            <div class="col-md-10">
                                                <input class="form-control js-input" type="time" id="timeFilm-eng"
                                                       placeholder="-"/>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <label class="form-label" for="yearFilm-eng">Release date</label>
                                            <input class="form-control js-input" id="yearFilm-eng"
                                                   style="width: 100%" placeholder="enter the year" type="text">
                                        </div>
                                        <div class="col-4">
                                            <label class="form-label" for="budgetFilm-eng">Film budget</label>
                                            <div class="input-group input-group-merge">
                                                <span class="input-group-text">$</span>
                                                <input type="text" class="form-control js-input" placeholder="100"
                                                       aria-label="Amount (to the nearest dollar)"
                                                       id="budgetFilm-eng"/>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ceo block -->
                                    <div class="col-12 mt-5">
                                        <div class="row">
                                            <h5 class="col-12 d-flex justify-content-center">SEO Block: </h5>
                                            <div>
                                                <!-- URL -->
                                                <div class="col-12 d-flex justify-content-center mb-4">
                                                    <div>
                                                        <label class="form-label" for="urlCeo-eng">URL:</label>
                                                        <input type="text" id="urlCeo-eng" class="form-control js-input"
                                                               placeholder="enter link" style="width: 500px">
                                                    </div>
                                                </div>

                                                <!-- Title -->
                                                <div class="col-12 d-flex justify-content-center mb-4">
                                                    <div>
                                                        <label class="form-label" for="titleCeo-eng">Title:</label>
                                                        <input type="text" id="titleCeo-eng"
                                                               class="form-control js-input"
                                                               placeholder="enter title" style="width: 500px">
                                                    </div>
                                                </div>

                                                <!-- Keywords -->
                                                <div class="col-12 d-flex justify-content-center mb-4">
                                                    <div>
                                                        <label class="form-label"
                                                               for="keywordsCeo-eng">Keywords:</label>
                                                        <input type="text" id="keywordsCeo-eng"
                                                               class="form-control js-input"
                                                               placeholder="enter keywords" style="width: 500px">
                                                    </div>
                                                </div>

                                                <!-- Description -->
                                                <div class="col-12 d-flex justify-content-center mb-4">
                                                    <div style="width: 500px">
                                                        <label class="form-label"
                                                               for="descriptionCeo-eng">Description:</label>
                                                        <textarea class="form-control" rows="3"
                                                                  id="descriptionCeo-eng"
                                                                  style="width:100%; height: 250px;"
                                                                  placeholder="enter description"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-evenly">
                                        <button class="btn btn-secondary" style="width: 200px"
                                                type="submit"> Save
                                        </button>
                                        <button class="btn btn-secondary back-version-eng" style="width: 200px"
                                                type="button"> Basic version
                                        </button>
                                    </div>
                                </div>

                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!--/ Content -->

            <!-- Footer -->
            <footer class="content-footer footer bg-footer-theme">
                Footer
            </footer>
            <!--/ Footer -->

            <!-- Content area backdrop -->
            <div class="content-backdrop fade"></div>

        </div>
        <!--/ Content wrapper -->

    </div>
    <!--/ Layout page -->

</div>
<!--/ Layout container -->

<!-- Overlay -->
<div class="layout-overlay layout-menu-toggle"></div>

<!-- Drag Target Area To SlideIn Menu On Small Screens -->
<div class="drag-target"></div>
</div>
<!--/ Layout wrapper -->

<th:block th:replace="blocks/links::scripts"></th:block>
<script th:src="@{/vuexy/assets/vendor/libs/bootstrap-select/bootstrap-select.js}"></script>
<script th:src="@{/vuexy/assets/vendor/libs/bootstrap-datepicker/bootstrap-datepicker.js}"></script>
<script th:src="@{/script.js}"></script>


<script>
    const contextPath = window.location.pathname.substring(0, window.location.pathname.indexOf("/", 2));
    window.addEventListener("DOMContentLoaded", () => {
        const path = window.location.pathname;
        const id = path.split('/')[4];
        const request = new XMLHttpRequest();
        request.open("GET", `/KinoCMSAdmin-R.Pravnyk/admin/film/${id}`);
        request.setRequestHeader("Content-type", "application/json; charset=utf-8");
        request.send();
        request.addEventListener("load", function () {
                if (request.status == 200) {
                    let data = JSON.parse(request.response);
                    time = data.durationTime;
                    year = data.year;
                    budget = data.budget;
                    dateStart = data.dateStart;
                    dateEnd = data.dateEnd;
                    linkTrailer = data.linkTrailer;
                    urlCeo = data.urlCeo;
                    marks = data.marks;
                    genres = data.genres;
                    if (data.image !== '') {
                        mainImage = contextPath + "/uploads/films/main-image/" + data.id + "/" + data.image;
                    }
                    if (data.galleries.length != null) {
                        let temporaryArray = new Array(5);
                        createGallery(temporaryArray);
                        for (let i = 0; i < data.galleries.length; i++) {
                            let object = data.galleries[i];
                            temporaryArray[i] = {
                                id: object.id,
                                idFilm: data.id,
                                type: object.type,
                                name: object.linkImage,
                                file: null,
                                link: null,
                                pathToImage: contextPath + "/uploads/films/galleries/" + data.id + "/" + object.linkImage
                            }
                        }
                        array = temporaryArray;
                        render();
                    }
                    document.getElementById(`titleFilm-ukr`).value = data.titleFilmUkr;
                    document.getElementById(`titleFilm-eng`).value = data.titleFilmEng;
                    document.getElementById(`descriptionFilm-ukr`).value = data.descriptionFilmUkr;
                    document.getElementById(`descriptionFilm-eng`).value = data.descriptionFilmEng;
                    document.getElementById(`titleCeo-eng`).value = data.titleCeoEng;
                    document.getElementById(`titleCeo-ukr`).value = data.titleCeoUkr;
                    document.getElementById(`keywordsCeo-ukr`).value = data.keywordsCeoUkr;
                    document.getElementById(`keywordsCeo-eng`).value = data.keywordsCeoEng;
                    document.getElementById(`descriptionCeo-ukr`).value = data.descriptionCeoUkr;
                    document.getElementById(`descriptionCeo-eng`).value = data.descriptionCeoEng;
                    const elementImg = document.getElementById(`image-main-download-${languageFlag}`);
                    elementImg.src = data.pathToImage;


                    dataRollBack = {
                        titleFilmUkr: data.titleFilmUkr,
                        titleFilmEng: data.titleFilmEng,
                        descriptionFilmUkr: data.descriptionFilmUkr,
                        descriptionFilmEng: data.descriptionFilmEng,
                        titleCeoUkr: data.titleCeoUkr,
                        titleCeoEng: data.titleCeoEng,
                        keywordsCeoUkr: data.keywordsCeoUkr,
                        keywordsCeoEng: data.keywordsCeoEng,
                        descriptionCeoUkr: data.descriptionCeoUkr,
                        descriptionCeoEng: data.descriptionCeoEng,
                        elementImg: data.pathToImage,
                        time: data.durationTime,
                        year: data.year,
                        budget: data.budget,
                        dateStart: data.dateStart,
                        dateEnd: data.dateEnd,
                        linkTrailer: data.linkTrailer,
                        urlCeo: data.urlCeo,
                        marks: data.marks,
                        genres: data.genres,
                        galleries: JSON.parse(JSON.stringify(array)),
                        mainImage: contextPath + "/uploads/films/main-image/" + data.id + "/" + data.image
                    }
                    assignDataInputs(languageFlag);
                }
                $("#bs-datepicker-daterange-ukr").datepicker({
                    format: "dd/mm/yyyy",       // Формат дати
                    // autoclose: true,            // Автоматичне закриття після вибору дати
                    // todayHighlight: true,       // Виділення сьогоднішньої дати
                    // language: "uk",             // Мова інтерфейсу
                    // startDate: "-3d",           // Початкова дата (3 дні тому)
                    // endDate: "+3d",             // Кінцева дата (через 3 дні)
                    // startDate: dateStart,           // Початкова дата (3 дні тому)
                    // endDate: dateEnd,             // Кінцева дата (через 3 дні)
                    // daysOfWeekDisabled: "0,6",  // Вимкнені дні тижня (неділя та субота)
                    // datesDisabled: ['10/07/2024', '15/07/2024'],  // Вимкнені конкретні дати
                    // clearBtn: true,             // Кнопка очищення
                    // toggleActive: true          // Перемикання активної дати
                });
                $("#bs-datepicker-daterange-eng").datepicker({format: "dd/mm/yyyy"});

                $("#genresFilm-ukr").selectpicker();
                $("#genresFilm-eng").selectpicker();
            }
        )
    });


    btnBackVersionUkr.onclick = function () {
        rollBackForm(JSON.parse(JSON.stringify(dataRollBack)));
        assignDataInputs(languageFlag);
        render();
    }
    btnBackVersionEng.onclick = function () {
        rollBackForm(JSON.parse(JSON.stringify(dataRollBack)));
        assignDataInputs(languageFlag);
        render();
    }
</script>


<script>
    const form = document.querySelector(".filmForm");
    const inputForm = document.querySelectorAll(".js-input");
    const isValidImage = document.querySelectorAll(".isValid-image");
    const marksValidParagraphs = document.querySelectorAll(".isValid-marks");
    const genresValidParagraphs = document.querySelectorAll(".isValid-genres");

    let marksCurrent = null;
    let genresCurrent = null;

    function validateForm() {
        let isValid = true;
        inputForm.forEach(function (input) {
            if (input.value === '') {
                input.classList.remove('successful');
                input.classList.add('error');
                console.log('input not filled');
                isValid = false;
            } else {
                input.classList.remove('error');
                input.classList.add('successful');
            }
        });

        isValidImage.forEach(function (input) {
            input.innerHTML = "";
            if (fileImageMain === null && mainImage === null) {
                let paragraph = document.createElement("p");
                paragraph.textContent = "The file was not downloaded";
                paragraph.style.color = "red";

                input.appendChild(paragraph);
                console.log('the file was not downloaded');
                isValid = false;
            }
        });

        if (languageFlag === 'ukr') {
            marksCurrent = TagifyCustomInlineSuggestion_UKR;
            genresCurrent = document.getElementById(`genresFilm-ukr`).selectedOptions;
        } else if (languageFlag === 'eng') {
            marksCurrent = TagifyCustomInlineSuggestion_ENG;
            genresCurrent = document.getElementById(`genresFilm-eng`).selectedOptions;
        }

        marksValidParagraphs.forEach(function (input) {
            if (marksCurrent.value.length === 0) {
                input.textContent = "More than one mark was not selected";
                isValid = false;
            } else {
                input.textContent = "";
            }
        })

        genresValidParagraphs.forEach(function (input) {
            if (genresCurrent.length === 0) {
                input.textContent = "More than one genre was not selected";
                isValid = false;
            } else {
                input.textContent = "";
            }
        });
        return isValid;
    }

    $(document).ready(function () {
        form.onsubmit = function () {
            event.preventDefault();
            if (languageFlag === 'ukr') {
                getDataFromInputs('eng');
                assignDataInputs('eng');
            } else if (languageFlag === 'eng') {
                getDataFromInputs('ukr');
                assignDataInputs('ukr');
            }
            if (validateForm()) {
                ajaxPost();
            } else {
                console.log('Form validation failed');
            }
        };

        function ajaxPost() {
            let formObject = getFormObject(languageFlag);
            for (let i = 0; i < array.length; i++) {
                let object = {
                    id: array[i].id,
                    name: array[i].name,
                    type: array[i].type
                };
                formObject.append("galleryDTO", JSON.stringify(object));
            }
            $.ajax({
                type: "post",
                url: "edit",
                data: formObject,
                processData: false,
                contentType: false,
                success: function () {
                    window.location.replace(contextPath + "/admin/films");
                },
                error: function (error) {
                    console.log("Error submitting form:", error);
                }
            });
        }
    });
</script>
</body>
</html>